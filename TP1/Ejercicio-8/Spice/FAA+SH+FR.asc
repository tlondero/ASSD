Version 4
SHEET 1 2360 860
WIRE -752 -816 -752 -832
WIRE 1216 -720 1216 -768
WIRE -752 -704 -752 -736
WIRE 848 -688 848 -736
WIRE 672 -656 672 -704
WIRE 1040 -656 1040 -704
WIRE 1440 -656 1440 -704
WIRE -1024 -640 -1024 -688
WIRE -752 -592 -752 -624
WIRE -1264 -576 -1264 -608
WIRE 1216 -576 1216 -640
WIRE 848 -544 848 -608
WIRE 672 -512 672 -576
WIRE 1040 -512 1040 -576
WIRE 1440 -512 1440 -576
WIRE -1024 -496 -1024 -560
WIRE 784 -432 -112 -432
WIRE -112 -272 -112 -432
WIRE 784 -272 784 -432
WIRE 784 -272 -112 -272
WIRE 144 -192 -48 -192
WIRE 624 -192 432 -192
WIRE 1472 -112 1280 -112
WIRE -48 -96 -48 -192
WIRE 16 -96 -48 -96
WIRE 432 -96 432 -192
WIRE 496 -96 432 -96
WIRE 144 -80 144 -192
WIRE 144 -80 80 -80
WIRE 624 -80 624 -192
WIRE 624 -80 560 -80
WIRE 16 -64 -256 -64
WIRE 144 -64 144 -80
WIRE 496 -64 144 -64
WIRE 624 -64 624 -80
WIRE 672 -64 624 -64
WIRE 1008 -64 672 -64
WIRE 1840 -64 1632 -64
WIRE 672 -48 672 -64
WIRE 1008 -32 928 -32
WIRE 1280 -16 1280 -112
WIRE 1344 -16 1280 -16
WIRE 1008 0 752 0
WIRE 1472 0 1472 -112
WIRE 1472 0 1408 0
WIRE -368 16 -1264 16
WIRE 672 16 672 0
WIRE 1344 16 1200 16
WIRE 1472 16 1472 0
WIRE 1632 16 1632 -64
WIRE 1632 16 1472 16
WIRE 1648 16 1632 16
WIRE 1840 16 1840 -64
WIRE 1904 16 1840 16
WIRE 1008 32 816 32
WIRE 672 48 672 16
WIRE 816 64 816 32
WIRE 1008 64 928 64
WIRE 1008 96 928 96
WIRE 752 160 752 0
WIRE 816 160 816 128
WIRE -1264 176 -1264 16
WIRE -368 176 -368 16
WIRE -368 176 -1264 176
FLAG 1904 16 Vout
FLAG 928 96 VCC
FLAG 928 64 -VCC
FLAG 816 160 0
FLAG 928 -32 Tpulsos
FLAG 752 160 0
FLAG 1440 -704 Tpulsos
FLAG 1440 -512 0
FLAG 672 -512 0
FLAG 672 -704 VCC
FLAG 1040 -512 0
FLAG 1040 -704 buffvcc
FLAG 1216 -768 0
FLAG 1216 -576 -buffvcc
FLAG 848 -736 0
FLAG 848 -544 -VCC
FLAG 48 -112 buffvcc
FLAG 48 -48 -buffvcc
FLAG 528 -112 buffvcc
FLAG 528 -48 -buffvcc
FLAG 1376 -32 buffvcc
FLAG 1376 32 -buffvcc
FLAG 672 48 0
FLAG -1024 -496 0
FLAG -752 -592 0
FLAG -1264 -496 0
FLAG -752 -832 Vin
SYMBOL FAA 1728 16 R0
SYMATTR InstName X2
SYMBOL LF398 1072 -16 R0
WINDOW 0 11 114 Left 0
SYMATTR InstName U1
SYMBOL cap 800 64 R0
SYMATTR InstName C1
SYMATTR Value 4n
SYMBOL voltage 1440 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 0 0.01n 0.01n {DOOTYCYCLE} {ts} 500)
SYMBOL voltage 672 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value {LLAVEVCC}
SYMBOL voltage 848 -704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value {LLAVEVCC}
SYMBOL voltage 1040 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value {BUFFVCC}
SYMBOL voltage 1216 -736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value {BUFFVCC}
SYMBOL Opamps\\opamp2 48 -144 R0
SYMATTR InstName U3
SYMATTR Value TL084
SYMBOL Opamps\\opamp2 528 -144 R0
SYMATTR InstName U4
SYMATTR Value TL084
SYMBOL Opamps\\opamp2 1376 -64 R0
SYMATTR InstName U5
SYMATTR Value TL084
SYMBOL cap 656 -48 R0
SYMATTR InstName C2
SYMATTR Value {CAP}
SYMBOL voltage -1024 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PWL file=sin32corta15750.pwl
SYMBOL voltage -752 -720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 {Ap} 0 {triangle_trise} {triangle_trise} {triangle_ton} {triangle_tperiod} 0)
SYMBOL voltage -752 -720 R180
WINDOW 3 -539 51 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 {Ap} {triangle_tdelay} {triangle_trise} {triangle_trise} {triangle_ton} {triangle_tperiod} 0)
SYMATTR InstName V7
SYMBOL voltage -1264 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.001 Cpar=0.1p
SYMATTR InstName V8
SYMATTR Value SINE(0 {Ap} {fin})
SYMBOL AM_GENERATOR -304 -48 R0
WINDOW 39 -156 24 Left 1
SYMATTR InstName X3
SYMATTR SpiceLine C={C} fp={fp} M={M}  fm={fm} mc={mc} A={A}
TEXT -8 336 Left 2 !;.ac dec 500 1 10k
TEXT -8 120 Left 2 !.include LF398.sub
TEXT -8 312 Left 2 !.tran 0 12.5m 0.01m uic
TEXT 224 -344 Left 2 !.param DT=25
TEXT 224 -304 Left 2 !.param Ap = 5
TEXT -8 -344 Left 2 !.param fs=1056
TEXT -8 -304 Left 2 !.param fin=15750
TEXT -104 -408 Left 2 !;USER INPUT:
TEXT 104 -416 Left 2 !.param BUFFVCC = 18
TEXT 104 -392 Left 2 !.param LLAVEVCC = 16
TEXT 456 -344 Left 2 !.param PULLDOWNR = 1k
TEXT 456 -304 Left 2 !.param CAP = 0.1n
TEXT -8 288 Left 2 !.param DOOTYCYCLE = ({ts}) - ((1-({DT}/100))*{ts})
TEXT -8 264 Left 2 !.param triangle_trise=0.25*(1/{fin})
TEXT -8 240 Left 2 !.param triangle_tdelay = 0.5*(1/{fin})
TEXT -8 216 Left 2 !.param triangle_ton = 0
TEXT -8 192 Left 2 !.param triangle_tperiod = 1 / {fin}
TEXT -8 168 Left 2 !.param ts = 1/{fs}
TEXT -8 144 Left 2 !.include TL084.301
TEXT -8 360 Left 2 !;.step lin param amp 1 5 0.5
TEXT -8 384 Left 2 !;.step param freqs 20k 25k 250
TEXT -8 408 Left 2 !;.step param dts 5 50 5
TEXT -56 64 Left 2 !;.save V(vin) V(vout)
TEXT -928 104 Left 2 !.param M=1
TEXT -928 144 Left 2 !.param fm=240
TEXT -1160 104 Left 2 !.param C=1
TEXT -1160 144 Left 2 !.param fp=2400
TEXT -1256 40 Left 2 !;AM CONFIG
TEXT -696 104 Left 2 !.param mc=1
TEXT -696 144 Left 2 !.param A=1
