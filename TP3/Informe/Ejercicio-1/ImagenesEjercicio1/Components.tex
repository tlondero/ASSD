\input{Header-Comp.tex}

\begin{document}


\newcommand{\adc}[1] % #1 = name
{node(#1_origin){}
	node[dipchip, num pins=32, hide numbers, no topmark, external pins width=0](C1){}
	
	%($ (C1.bpin 1) !.5! (C1.bpin 32) $) ++ (0,0.5) node[](){$ADC$}

	%LEFT NODES
	node[right, font=\footnotesize] at (C1.bpin 1) {$IN_0$}
	node[right, font=\footnotesize] at (C1.bpin 2) {$IN_1$}	
	node[right, font=\footnotesize] at (C1.bpin 3) {$IN_3$}	
	node[right, font=\footnotesize] at (C1.bpin 4) {$IN_4$}	
	node[right, font=\footnotesize] at (C1.bpin 5) {$IN_5$}	
	node[right, font=\footnotesize] at (C1.bpin 6) {$IN_6$}	
	node[right, font=\footnotesize] at (C1.bpin 7) {$IN_7$}	
	node[right, font=\footnotesize] at (C1.bpin 8) {$IN_8$}
		
	(C1.bpin 1) -- ++ (-0.5,0) node[](#1_in0){}	
	(C1.bpin 2) -- ++ (-0.5,0) node[](#1_in1){}
	(C1.bpin 3) -- ++ (-0.5,0) node[](#1_in2){}
	(C1.bpin 4) -- ++ (-0.5,0) node[](#1_in3){}
	(C1.bpin 5) -- ++ (-0.5,0) node[](#1_in4){}
	(C1.bpin 6) -- ++ (-0.5,0) node[](#1_in5){}
	(C1.bpin 7) -- ++ (-0.5,0) node[](#1_in6){}
	(C1.bpin 8) -- ++ (-0.5,0) node[](#1_in7){}
	
	node[right, font=\footnotesize] at (C1.bpin 10) {$ADD \ A$}
	node[right, font=\footnotesize] at (C1.bpin 11) {$ADD \ B$}
	node[right, font=\footnotesize] at (C1.bpin 12) {$ADD \ C$}
	node[right, font=\footnotesize] at (C1.bpin 13) {$ALE$}
	
	(C1.bpin 10) -- ++ (-0.5,0) node[](#1_adda){}	
	(C1.bpin 11) -- ++ (-0.5,0) node[](#1_addb){}
	(C1.bpin 12) -- ++ (-0.5,0) node[](#1_addc){}
	(C1.bpin 13) -- ++ (-0.5,0) node[](#1_ale){}
	
	node[right, font=\footnotesize] at (C1.bpin 15) {$+V_{REF}$}
	node[right, font=\footnotesize] at (C1.bpin 16) {$-V_{REF}$}
	
	(C1.bpin 15) -- ++ (-0.5,0) node[](#1_v+){}	
	(C1.bpin 16) -- ++ (-0.5,0) node[](#1_v-){}
	
	%RIGHT NODES
	node[left, font=\footnotesize] at (C1.bpin 32) {$CLOCK$}
	node[left, font=\footnotesize] at (C1.bpin 31) {$START$}
	
	(C1.bpin 32) -- ++ (0.5,0) node[](#1_clock){}	
	(C1.bpin 31) -- ++ (0.5,0) node[](#1_start){}
	
	node[left, font=\footnotesize] at (C1.bpin 29) {$EOC$}
	
	(C1.bpin 29) -- ++ (0.5,0) node[](#1_eoc){}
	
	node[left, font=\footnotesize] at (C1.bpin 27) {$OUT_1$}
	node[left, font=\footnotesize] at (C1.bpin 26) {$OUT_2$}
	node[left, font=\footnotesize] at (C1.bpin 25) {$OUT_3$}
	node[left, font=\footnotesize] at (C1.bpin 24) {$OUT_4$}
	node[left, font=\footnotesize] at (C1.bpin 23) {$OUT_5$}
	node[left, font=\footnotesize] at (C1.bpin 22) {$OUT_6$}
	node[left, font=\footnotesize] at (C1.bpin 21) {$OUT_7$}
	node[left, font=\footnotesize] at (C1.bpin 20) {$OUT_8$}
	
	(C1.bpin 27) -- ++ (0.5,0) node[](#1_out1){}	
	(C1.bpin 26) -- ++ (0.5,0) node[](#1_out2){}
	(C1.bpin 25) -- ++ (0.5,0) node[](#1_out3){}
	(C1.bpin 24) -- ++ (0.5,0) node[](#1_out4){}
	(C1.bpin 23) -- ++ (0.5,0) node[](#1_out5){}
	(C1.bpin 22) -- ++ (0.5,0) node[](#1_out6){}
	(C1.bpin 21) -- ++ (0.5,0) node[](#1_out7){}
	(C1.bpin 20) -- ++ (0.5,0) node[](#1_out8){}
	
	node[left, font=\footnotesize] at (C1.bpin 17) {$OE$}	
	
	(C1.bpin 17) -- ++ (0.5,0) node[](#1_oe){}	
}

\newcommand{\dac}[2] % #1 = name #2 = anchor
%
{node(#1_origin){}
	node[dipchip, num pins=16, hide numbers, no topmark, external pins width=0, anchor = bpin #2](C1){}
	
	%($ (C1.bpin 1) !.5! (C1.bpin 16) $) ++ (0,0.5) node[](){$DAC$}

	%LEFT NODES
	node[right, font=\footnotesize] at (C1.bpin 1) {$THR$}
	node[right, font=\footnotesize] at (C1.bpin 2) {$\overline{IOUT}$}	
	node[right, font=\footnotesize] at (C1.bpin 3) {$V-$}	
	node[right, font=\footnotesize] at (C1.bpin 4) {$IOUT$}	
	node[right, font=\footnotesize] at (C1.bpin 5) {$B_1$}	
	node[right, font=\footnotesize] at (C1.bpin 6) {$B_2$}	
	node[right, font=\footnotesize] at (C1.bpin 7) {$B_3$}	
	node[right, font=\footnotesize] at (C1.bpin 8) {$B_4$}
		
	(C1.bpin 1) -- ++ (-0.5,0) node[](#1_thr){}	
	(C1.bpin 2) -- ++ (-0.5,0) node[](#1_ioutb){}
	(C1.bpin 3) -- ++ (-0.5,0) node[](#1_v-){}
	(C1.bpin 4) -- ++ (-0.5,0) node[](#1_iout){}
	(C1.bpin 5) -- ++ (-0.5,0) node[](#1_b1){}
	(C1.bpin 6) -- ++ (-0.5,0) node[](#1_b2){}
	(C1.bpin 7) -- ++ (-0.5,0) node[](#1_b3){}
	(C1.bpin 8) -- ++ (-0.5,0) node[](#1_b4){}
	
	%RIGHT NODES
	node[left, font=\footnotesize] at (C1.bpin 16) {$COMP$}
	node[left, font=\footnotesize] at (C1.bpin 15) {$-V_{REF}$}
	node[left, font=\footnotesize] at (C1.bpin 14) {$+V_{REF}$}
	node[left, font=\footnotesize] at (C1.bpin 13) {$V+$}
	node[left, font=\footnotesize] at (C1.bpin 12) {$B_8$}
	node[left, font=\footnotesize] at (C1.bpin 11) {$B_7$}
	node[left, font=\footnotesize] at (C1.bpin 10) {$B_6$}
	node[left, font=\footnotesize] at (C1.bpin 9) {$B_5$}
	
	(C1.bpin 16) -- ++ (0.5,0) node[](#1_comp){}	
	(C1.bpin 15) -- ++ (0.5,0) node[](#1_vr-){}
	(C1.bpin 14) -- ++ (0.5,0) node[](#1_vr+){}
	(C1.bpin 13) -- ++ (0.5,0) node[](#1_v+){}
	(C1.bpin 12) -- ++ (0.5,0) node[](#1_b8){}
	(C1.bpin 11) -- ++ (0.5,0) node[](#1_b7){}
	(C1.bpin 10) -- ++ (0.5,0) node[](#1_b6){}
	(C1.bpin 9) -- ++ (0.5,0) node[](#1_b5){}		
}

\newcommand{\cincocincocinco}[1] % #1 = name
{node(#1_origin){}
	node[dipchip, num pins=12, hide numbers, no topmark, external pins width=0](C3){}
	
	%($ (C3.bpin 1) !.5! (C3.bpin 12) $) ++ (0,0.5) node[](){$555$}

	%LEFT NODES
	node[right, font=\footnotesize] at (C3.bpin 1) {$V_{CC}$}
	node[right, font=\footnotesize] at (C3.bpin 2) {$RST$}	
	node[right, font=\footnotesize] at (C3.bpin 3) {$DIS$}
	node[right, font=\footnotesize] at (C3.bpin 4) {$THR$}	
	node[right, font=\footnotesize] at (C3.bpin 5) {$TRI$}	
	node[right, font=\footnotesize] at (C3.bpin 6) {$COM$}	

	(C3.bpin 1) -- ++ (-0.5,0) node[](#1_vc){}	
	(C3.bpin 2) -- ++ (-0.5,0) node[](#1_rst){}
	(C3.bpin 3) -- ++ (-0.5,0) node[](#1_dis){}
	(C3.bpin 4) -- ++ (-0.5,0) node[](#1_thr){}	
	(C3.bpin 5) -- ++ (-0.5,0) node[](#1_tri){}
	(C3.bpin 6) -- ++ (-0.5,0) node[](#1_com){}


	%RIGHT NODES
	node[left, font=\footnotesize] at (C3.bpin 12) {$OUT$}
	node[left, font=\footnotesize] at (C3.bpin 7) {$GND$}	
	
	(C3.bpin 12) -- ++ (0.5,0) node[](#1_out){}
	(C3.bpin 7) -- ++ (0.5,0) node[](#1_gnd){}
}

\begin{page}
\begin{circuitikz}
	\ctikzset{multipoles/thickness=3}				%Ancho de las lineas de las cajas
	\ctikzset{diodes/scale=0.6}	
	\ctikzset{multipoles/dipchip/width=2}			%Ancho del 555
	
	\draw 
		(0,0) ++ (2,0) \cincocincocinco{ccc}	
		(ccc_rst.center) -- (ccc_vc.center) -- ++ (0,1) node[vcc, label=north:$5 \ V$](){}
		(ccc_thr.center) -- (ccc_tri.center)
		(ccc_com.center) to[C, label=$C_C$] ++ (0,-2) node[ground](){}
		(ccc_gnd.center) -- ++ (0,-2) node[ground](){}
		(ccc_out.center) -- ++ (1,0) node[ocirc,label=$V_{OUT}$](){}
		
		($ (ccc_thr.center) !.5! (ccc_tri.center) $) node[circ](){} -- ++ (-3,0) node[circ](aux1){} to[pR, name=pr, l_=$R_{POT}$] ++(0,2) to[R, l_=$R_T$] ++(0,3) node[npn, anchor=E, label=left:$Q_{CHG}$, xscale=-1](q){}
		(q.E) node[circ](){} to[D] ++(2,0) node[circ](aux2){} |- (ccc_dis.center)
		
		(aux2.center) |- (q.B)
		(q.E) ++ (2,0) -- ++ (0,1) to[R, l_=$R_B$] ++ (0,2) node[vcc, label=north:$5 \ V$](){}
		(q.C) -- ++ (0,1.5) node[vcc, label=north:$5 \ V$](){}
		
		(pr.wiper) -- ++ (-0.5,0) |- (aux1) to[C, l=$C_T$] ++ (0,-2.75) node[ground](){}
	;
		
%	%NODOS AUXILIARES
%	\draw[color = red]		
%		(aux1.center) node[circ, label=south west:aux1](){}
%		(aux2.center) node[circ, label=right:aux2](){}
%	;	
\end{circuitikz}
\end{page}

\begin{page}
\begin{circuitikz}
	\ctikzset{multipoles/thickness=3}				%Ancho de las lineas de las cajas
	
	\ctikzset{multipoles/dipchip/width=2.5}			%Ancho del adc
	\draw (0,0) ++ (2,0) \adc{adc};
	\ctikzset{multipoles/dipchip/width=4}			%Ancho del dac
	\draw
		
		(adc_out1.center) ++ (5,0) \dac{dac}{5}
	
		(adc_out1.center) -| ($ (adc_out1.center) !.5! (dac_b1.center) $) |- (dac_b1.center)
		(adc_out2.center) -| ($ (adc_out2.center) !.45! (dac_b2.center) $) |- (dac_b2.center)
		(adc_out3.center) -| ($ (adc_out3.center) !.4! (dac_b3.center) $) |- (dac_b3.center)
		(adc_out4.center) -| ($ (adc_out4.center) !.35! (dac_b4.center) $) |- (dac_b4.center)
		
		(adc_out5.center) -| (dac_b5.center)
		(dac_b6.center) -| ++ (0.5,-0.1) |- (adc_out6.center)
		(dac_b7.center) -| ++ (1,-0.1) |- (adc_out7.center)
		(dac_b8.center) -| ++ (1.5,-0.1) |- (adc_out8.center)
		
		(adc_in1.center) node[circ](){}	
		(adc_in2.center) node[circ](){}	
		(adc_in3.center) node[circ](){}	
		(adc_in4.center) node[circ](){}	
		(adc_in5.center) node[circ](){}	
		(adc_in6.center) node[circ](){}	
		(adc_in7.center) node[circ](){}	
		(adc_adda.center) node[circ](){}	
		(adc_addb.center) node[circ](){}	
		(adc_addc.center) node[circ](){}
		(adc_v-.center) node[circ](){}
		
		(adc_in1.center) -- (adc_v-.center) -- ++(0,-1) node[ground](){}		
	;	
	
\end{circuitikz}
\end{page}


\end{document}